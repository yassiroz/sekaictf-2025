events {
    worker_connections 102400;
}

http {
    server {
        listen 80;
        server_name nbv.chals.sekai.team;

        root /app;
        index index.html;

        location / {
            try_files /index.html =404;

            add_header Vary "Sec-Fetch-Site" always;
            add_header Cache-Control "no-store" always;
            add_header Clear-Site-Data "\"*\"" always;
            add_header Cross-Origin-Embedder-Policy "require-corp" always;
            add_header Cross-Origin-Resource-Policy "cross-origin" always;
            add_header Referrer-Policy "no-referrer" always;
            add_header X-Content-Type-Options "nosniff" always;
            add_header Origin-Agent-Cluster "?1" always;
        }
    }

    server {
        listen 80;
        server_name ~^nbv-[0-9-]+\.chals\.sekai\.team$;

        root /app;
        index frame.html;

        location / {
            try_files /frame.html =404;

            add_header Vary "Sec-Fetch-Site" always;
            add_header Cache-Control "no-store" always;
            add_header Clear-Site-Data "\"*\"" always;
            add_header Cross-Origin-Embedder-Policy "require-corp" always;
            add_header Cross-Origin-Resource-Policy "cross-origin" always;
            add_header Referrer-Policy "no-referrer" always;
            add_header X-Content-Type-Options "nosniff" always;
            add_header Origin-Agent-Cluster "?1" always;
        }
    }
}
